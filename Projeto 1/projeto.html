<!--
  1º Projeto CGI
  Autor: Eduardo Bezerra Subtil - 48492
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Projeto CGI</title>

    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec4 vColor;
        attribute vec3 sizeShapeSpeed;

        varying float fShape;
        varying vec4 fColor;
        varying float fSpeed;

        void main(){
            gl_Position = vPosition;
            fColor = vColor;
            gl_PointSize = sizeShapeSpeed.x;
            fShape = sizeShapeSpeed.y;
            fSpeed = sizeShapeSpeed.z;
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
    varying vec4 fColor;
    varying float fShape;
    varying float fSpeed;

    vec2 getPos(vec2 p){
        return vec2(2.0, -2.0) * p - vec2(1.0, -1.0);
    }

    mat2 rotate2d(float _angle){
      return mat2(cos(_angle),-sin(_angle), sin(_angle),cos(_angle));
    }

    vec4 hollowSqr(vec4 hsq){
       float dist = distance( vec2(0.0,0.0), getPos(gl_PointCoord));
       if ( dist <= 1.0 )
        discard;
      return hsq;
    }

    vec4 circle(vec4 clr) {
      float dist = distance( vec2(0.0,0.0), getPos(gl_PointCoord));
      if ( dist > 1.0 )
        discard;
      return clr;
    }

    vec4 square(vec4 sqr){
        vec2 aux = getPos(gl_PointCoord);
        aux = aux * rotate2d(fSpeed);

        if (aux.s < -0.4 || aux.s > 0.4 || aux.t < -0.4 || aux.t > 0.4)
            discard;

        return sqr;
    }




    void main() {
        if (fShape == 0.0)
            gl_FragColor = square(fColor);

        else if (fShape == 1.0)
            gl_FragColor = circle(fColor);

        else if (fShape == 2.0)
            gl_FragColor = hollowSqr(fColor);

    }

    </script>

    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    <script src="projeto.js"></script>

</head>
<body>

<canvas id="canvas" width="800" height = "800">
    Your browser does not support HTML5
</canvas>

<div style="position: fixed; top: 10px; left: 820px; ">
    <!-- Shapes -->
    <font size = "14"><i>Shapes </i></font>

    <br><br>

    <select id = "shapes">
        <option value = 0.0>Square</option>
        <option value = 1.0>Circle</option>
        <option value = 2.0>Hollow Square</option>
    </select>

    <br><br>

    <!-- Colors -->
    <font size = "14"><i>Colors</i></font>

    <br><br>

    <font color = "red"><i>Red</i></font><br>
    <input id = "red" type="range" value = 0.5 max = 1.0 min = 0.0
           step = 0.0001 onmousemove="changeColors()"><br>

    <font color = "green"><i>Green</i></font><br>
    <input id = "green" type="range" value = 0.5 max = 1.0 min = 0.0
           step = 0.0001 onmousemove="changeColors()"><br>

    <font color = "blue"><i>Blue</i></font><br>
    <input id = "blue" type="range" value = 0.5 max = 1.0 min = 0.0
           step = 0.0001 onmousemove="changeColors()"><br>

    <i>Alpha</i><br>
    <input id = "alpha" type="range" value = 1.0 max = 1.0 min = 0.0
           step = 0.0001 onmousemove="changeColors()">

    <br><br>

    <!-- Preview -->
    <div id = "preview" style = "width: 130px; height: 30px;
        background-color: grey"/>

    <br><br><br>

    <!-- Auto -->
    <button type = "button" onclick="toggleAutoMode()">(╯◕ ³◕）╯︵ ┻━┻</button>
</div>

</body>
</html>
